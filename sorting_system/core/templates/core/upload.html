{% extends "core/base.html" %}

{% block main_content %}  <!-- Используем новый блок -->
<div class="card">
    <div class="card-header bg-primary text-white">
        <h2>Загрузите изображение для анализа</h2>
    </div>
    <div class="card-body">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <label for="id_image" class="form-label">Выберите изображение:</label>
                {{ form.image }}
            </div>
            <button type="submit" class="btn btn-success btn-lg">Анализировать</button>
        </form>
    </div>
</div>
{% endblock %}
<!-- core/templates/core/upload.html -->
<script>
document.querySelector('form').addEventListener('submit', function() {
    // Показываем индикатор загрузки
    const loader = document.createElement('div');
    loader.innerHTML = '<div class="spinner-border text-primary" role="status"><span class="visually-hidden">Загрузка...</span></div>';
    loader.style.position = 'fixed';
    loader.style.top = '50%';
    loader.style.left = '50%';
    loader.style.zIndex = 1000;
    document.body.appendChild(loader);
    
    // Отключаем кнопку
    this.querySelector('button').disabled = true;
});
</script>